<?xml version="1.0" standalone="yes"?>


<Instruments xmlns="instruments.xmlbeans.model.fc.lmn.org">

    <!-- ....................................................................................... -->
    <!-- Observatory Clock -->

    <Instrument>
        <Identifier>ObservatoryClock</Identifier>

        <!-- The Clock Controller -->
        <Controller>
            <!-- A virtual Controller -->
            <!-- Three DECIMAL digits, 000 in this version -->
            <VirtualAddress>000</VirtualAddress>

            <!-- ............................................................................... -->
            <!-- Instrument (Primary Plugins) -->
            <!-- ............................................................................... -->
            <!-- Allow Parent to Child links to identify those physical Plugins **required** for this Instrument -->
            <!-- The schema allows for zero Plugins -->

            <PluginManifest>
                <!-- The Key for the PrimaryPlugin, which defines the nature of the Instrument -->
                <PrimaryResourceKey>Utilities</PrimaryResourceKey>

                <!-- There are no Secondary Plugins for this Instrument -->
            </PluginManifest>

            <Identifier>Core</Identifier>
            <Name>Core</Name>
            <Description>The Observatory Clock Core</Description>
            <ResourceKey>Core</ResourceKey>

            <!-- ............................................................................... -->
            <!-- Generic (Mandatory) Commands -->

            <!-- The Core has a CommandCodeBase of zero -->
            <CommandCodeBase>00</CommandCodeBase>

            <Command>
                <Identifier>reset</Identifier>
                <CommandCode>00</CommandCode>
                <CommandVariant>0000</CommandVariant>
                <Description>Resets the Clock</Description>
                <Parameter>
                    <Name>Reset.Mode</Name>
                    <InputDataType>
                        <DataTypeName>String</DataTypeName>
                    </InputDataType>
                    <TrafficDataType>
                        <DataTypeName>NumericIndexedList</DataTypeName>
                        <FieldCount>1</FieldCount>
                    </TrafficDataType>
                    <Units>Dimensionless</Units>
                    <Choices>Soft,Defaults</Choices>
                    <Tooltip>Allowed values: Soft, Defaults</Tooltip>
                </Parameter>
                <SendToPort>false</SendToPort>
                <Response>
                    <Name>Reset</Name>
                    <DataTypeName>String</DataTypeName>
                    <Units>Dimensionless</Units>
                    <Regex>Ok</Regex>
                </Response>
            </Command>

            <Command>
                <Identifier>ping</Identifier>
                <CommandCode>01</CommandCode>
                <CommandVariant>0000</CommandVariant>
                <Description>Pings the Clock Controller</Description>
                <SendToPort>false</SendToPort>
                <Response>
                    <Name>Pong</Name>
                    <DataTypeName>String</DataTypeName>
                    <Units>Dimensionless</Units>
                    <Regex>Ok</Regex>
                </Response>
            </Command>

            <Command>
                <Identifier>getConfiguration</Identifier>
                <CommandCode>02</CommandCode>
                <CommandVariant>0000</CommandVariant>
                <Description>Gets the configuration of the Clock in XML</Description>
                <SendToPort>false</SendToPort>
                <Response>
                    <Name>Configuration</Name>
                    <DataTypeName>XML</DataTypeName>
                    <Units>Dimensionless</Units>
                </Response>
            </Command>

            <!-- ............................................................................... -->
            <!-- Core Commands executed entirely on the host -->

            <!-- start() starts the Instrument, exactly as for the ControlPanel green button -->
            <!-- This is required for the Macro support -->
            <Command>
                <Identifier>start</Identifier>
                <CommandCode>03</CommandCode>
                <CommandVariant>0000</CommandVariant>
                <Description>Starts the Instrument</Description>
                <SendToPort>false</SendToPort>
                <Response>
                    <Name>Ack</Name>
                    <DataTypeName>String</DataTypeName>
                    <Units>Dimensionless</Units>
                    <Regex>Ok</Regex>
                </Response>
            </Command>

            <!-- stop() stops the Instrument, exactly as for the ControlPanel red button -->
            <!-- This is required for the Macro support -->
            <Command>
                <Identifier>stop</Identifier>
                <CommandCode>04</CommandCode>
                <CommandVariant>0000</CommandVariant>
                <Description>Stops the Instrument</Description>
                <SendToPort>false</SendToPort>
                <Response>
                    <Name>Ack</Name>
                    <DataTypeName>String</DataTypeName>
                    <Units>Dimensionless</Units>
                    <Regex>Ok</Regex>
                </Response>
            </Command>

            <!-- getVersion() returns a String giving the version information for the Controller OS -->
            <Command>
                <Identifier>getVersion</Identifier>
                <CommandCode>0A</CommandCode>
                <CommandVariant>0000</CommandVariant>
                <Description>Gets the Version of the Controller OS</Description>
                <SendToPort>false</SendToPort>
                <Response>
                    <Name>Configuration.Version</Name>
                    <DataTypeName>String</DataTypeName>
                    <Units>Dimensionless</Units>
                </Response>
            </Command>

            <!-- ............................................................................... -->
            <!-- Ephemerides Plugin -->

            <Plugin>
                <!-- A virtual Plugin -->
                <Identifier>Ephemerides</Identifier>
                <Name>Ephemerides</Name>
                <Description>The Ephemerides Utilities</Description>
                <ResourceKey>Ephemerides</ResourceKey>

                <!-- The Ephemerides Plugin is always CommandCodeBase 42 -->
                <CommandCodeBase>42</CommandCodeBase>

                <Command>
                    <Identifier>calculateToposEphemeris</Identifier>
                    <CommandCode>00</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Calculates an Ephemeris for your location</Description>
                    <Parameter>
                        <Name>Ephemeris.Target</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>!EphemerisTargets</Choices>
                        <Tooltip>Choose a target object for the Ephemeris</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Ephemeris.Date.Start</Name>
                        <InputDataType>
                            <DataTypeName>Date</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>YearMonthDay</Units>
                        <Regex>^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$</Regex>
                        <Tooltip>Format YYYY-MM-DD</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Ephemeris.Time.Start</Name>
                        <InputDataType>
                            <DataTypeName>Time</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>HourMinSec</Units>
                        <Regex>^(([0-1][0-9]|[2][0-3])):([0-5][0-9]):([0-5][0-9])$</Regex>
                        <Tooltip>Format HH:MM:SS</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Ephemeris.Date.End</Name>
                        <InputDataType>
                            <DataTypeName>Date</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>YearMonthDay</Units>
                        <Regex>^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$</Regex>
                        <Tooltip>Format YYYY-MM-DD</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Ephemeris.Time.End</Name>
                        <InputDataType>
                            <DataTypeName>Time</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>HourMinSec</Units>
                        <Regex>^(([0-1][0-9]|[2][0-3])):([0-5][0-9]):([0-5][0-9])$</Regex>
                        <Tooltip>Format HH:MM:SS</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Ephemeris.Time.Interval</Name>
                        <InputDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </TrafficDataType>
                        <Units>Seconds</Units>
                        <Regex>^([1-9][0-9]{0,3}|1[0-9]{4}|20000)$</Regex>
                        <Tooltip>The time interval between Ephemeris results (1 to 20000 seconds)</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Ephemeris.Epoch</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>!EpochList</Choices>
                        <Tooltip>The Epoch for the Ephemeris, e.g. J2000</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ephemeris.Data</Name>
                        <DataTypeName>VectorData</DataTypeName>
                        <Units>Dimensionless</Units>
                    </Response>
                </Command>

                <Command>
                    <Identifier>copyResponseToClipboard</Identifier>
                    <CommandCode>01</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Copies the most recent ResponseValue to the host Clipboard</Description>
                    <SendToPort>false</SendToPort>
                    <Ack>
                        <Name>Ack</Name>
                    </Ack>
                </Command>
            </Plugin>

            <!-- ............................................................................... -->
            <!-- TimeProxy Plugin -->

            <Plugin>
                <!-- A virtual Plugin -->
                <Identifier>TimeProxy</Identifier>
                <Name>TimeProxy</Name>
                <Description>The Clock TimeProxy</Description>
                <ResourceKey>TimeProxy</ResourceKey>

                <!-- The TimeProxy Plugin is CommandCodeBase 40 -->
                <CommandCodeBase>40</CommandCodeBase>

                <Command>
                    <Identifier>getSynchronisePeriod</Identifier>
                    <CommandCode>00</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Get the current period to wait before resynchronising the TimeProxy</Description>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>SynchronisePeriod</Name>
                        <DataTypeName>DecimalInteger</DataTypeName>
                        <Units>Seconds</Units>
                        <!-- Limit the range to 0010 to 1000 seconds -->
                        <Regex>^0*([1-9][0-9]{1,2}|1000)$</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>setSynchronisePeriod</Identifier>
                    <CommandCode>01</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Set the period to wait before resynchronising the TimeProxy</Description>
                    <Parameter>
                        <Name>SynchronisePeriod</Name>
                        <InputDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </TrafficDataType>
                        <Units>Seconds</Units>
                        <!-- Limit the range to 0010 to 1000 seconds -->
                        <!-- See:http://utilitymill.com/utility/Regex_For_Range -->
                        <Regex>^0*([1-9][0-9]{1,2}|1000)$</Regex>
                        <Tooltip>Allowed Values: 10 to 1000 seconds</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>synchroniseTimeProxy</Identifier>
                    <CommandCode>02</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Synchronises the Time Proxy every SynchronisePeriod, using NTP</Description>
                    <Category>Capture</Category>
                    <Parameter>
                        <Name>Run</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>VerboseLogging</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Controls verbose logging of synchronisation events. Allowed values: true or false</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

            </Plugin>

            <!-- ............................................................................... -->
            <!-- MetadataManager Plugin -->

            <Plugin>
                <!-- A virtual Plugin -->
                <Identifier>MetadataManager</Identifier>
                <Name>MetadataManager</Name>
                <Description>The MetadataManager Module</Description>
                <ResourceKey>MetadataManager</ResourceKey>

                <!-- The MetadataManager Plugin is always CommandCodeBase 58 -->
                <CommandCodeBase>58</CommandCodeBase>

                <Command>
                    <Identifier>importMetadata</Identifier>
                    <CommandCode>00</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Import the selected Metadata</Description>
                    <Parameter>
                        <Name>MetadataType</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>Framework,Observatory,Observer,Observation,Instrument,Controller,!PluginList</Choices>
                        <Tooltip>Allowed values: Framework, Observatory, Observer, Observation, Instrument, Controller, All Plugins</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                    </Response>
                </Command>

                <Command>
                    <Identifier>importMetadataLocal</Identifier>
                    <CommandCode>01</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Import a custom Metadata file from the local file system</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>workspace</Value>
                        <Tooltip>The filename of the Metadata to be imported</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>setMetadataValue</Identifier>
                    <CommandCode>02</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Set the Value of the selected Metadata item</Description>
                    <Parameter>
                        <Name>Metadata.Key</Name>
                        <InputDataType>
                            <DataTypeName>MetadataKey</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Tooltip>A Metadata Key valid for the current Instrument and dataset</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Metadata.Value</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Tooltip>The requested new Value of the Metadata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportMetadata</Identifier>
                    <CommandCode>03</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current MetaData in the specified file and format</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/Metadata</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/Metadata</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>removeMetadata</Identifier>
                    <CommandCode>04</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Remove the selected Metadata</Description>
                    <Parameter>
                        <Name>MetadataType</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>Framework,Observatory,Observer,Observation,Instrument,MetadataMetadata</Choices>
                        <Tooltip>Allowed values: Framework, Observatory, Observer, Observation, Instrument (all), MetadataMetadata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                    </Response>
                </Command>

            </Plugin>

            <!-- ............................................................................... -->
            <!-- Exporter Plugin -->

            <Plugin>
                <!-- A virtual Plugin -->
                <Identifier>Exporter</Identifier>
                <Name>Exporter</Name>
                <Description>The Exporter Module</Description>
                <ResourceKey>Exporter</ResourceKey>

                <CommandCodeBase>81</CommandCodeBase>

                <Command>
                    <Identifier>exportCommandLog</Identifier>
                    <CommandCode>00</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the Command Log in the specified file</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/CommandLog</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/CommandLog</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportClockOffset</Identifier>
                    <CommandCode>01</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current ClockOffset chart as an image in the specified file</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/ClockOffset</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/ClockOffset</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>png,jpg,gif</Choices>
                        <Tooltip>Allowed values: GIF, JPG, PNG (PNG preferred)</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Width</Name>
                        <InputDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Regex>^0*(3[2-9]|[4-9][0-9]|[1-9][0-9]{2}|[12][0-9]{3}|3000)$</Regex>
                        <Value>1024</Value>
                        <Tooltip>The width of the image in pixels (32 to 3000)</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Height</Name>
                        <InputDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Regex>^0*(3[2-9]|[4-9][0-9]|[1-9][0-9]{2}|[12][0-9]{3}|3000)$</Regex>
                        <Value>768</Value>
                        <Tooltip>The height of the image in pixels (32 to 3000)</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportMetadata</Identifier>
                    <CommandCode>02</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current MetaData in the specified file and format</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/Metadata</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/Metadata</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportStarMap</Identifier>
                    <CommandCode>03</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current Star Map as an image in the specified file</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/StarMap</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/map01</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>png,jpg,gif</Choices>
                        <Tooltip>Allowed values: PNG, JPG, GIF</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Width</Name>
                        <InputDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Regex>^0*(3[2-9]|[4-9][0-9]|[1-9][0-9]{2}|[12][0-9]{3}|3000)$</Regex>
                        <Value>1024</Value>
                        <Tooltip>The width of the image in pixels (32 to 3000)</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Height</Name>
                        <InputDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>DecimalInteger</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Regex>^0*(3[2-9]|[4-9][0-9]|[1-9][0-9]{2}|[12][0-9]{3}|3000)$</Regex>
                        <Value>768</Value>
                        <Tooltip>The height of the image in pixels (32 to 3000)</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportEphemeris</Identifier>
                    <CommandCode>04</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current Ephemeris in the specified file and format</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/Ephemeris</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/Ephemeris</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportEventLog</Identifier>
                    <CommandCode>05</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current Event Log in the specified file and format</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/EventLog</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/EventLog</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportConfiguration</Identifier>
                    <CommandCode>06</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the current Instrument configuration in the specified file and format</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/Configuration</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/Configuration</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated,FormattedStardata,CompressedStardata</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportCommandLexicon</Identifier>
                    <CommandCode>07</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the Instrument Command Lexicon in the specified file</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/CommandLexicon</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/CommandLexicon</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Format</Name>
                        <InputDataType>
                            <DataTypeName>String</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>CommaSeparated,TabSeparated</Choices>
                        <Tooltip>Allowed values: CommaSeparated,TabSeparated</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>exportInstrumentXML</Identifier>
                    <CommandCode>08</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Saves the Instrument XML in the specified file</Description>
                    <Parameter>
                        <Name>Filename</Name>
                        <InputDataType>
                            <DataTypeName>FileName</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>String</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <!-- ToDo Regex -->
                        <Value>archive/InstrumentXML</Value>
                        <Tooltip>The pathname/filename to be saved without file extension e.g. archive/InstrumentXML</Tooltip>
                    </Parameter>
                    <Parameter>
                        <Name>Timestamp</Name>
                        <InputDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </InputDataType>
                        <TrafficDataType>
                            <DataTypeName>Boolean</DataTypeName>
                        </TrafficDataType>
                        <Units>Dimensionless</Units>
                        <Choices>true,false</Choices>
                        <Tooltip>Allowed values: true or false, to control the addition of a timestamp to the filename</Tooltip>
                    </Parameter>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Ack</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <Regex>Ok</Regex>
                    </Response>
                </Command>
            </Plugin>

            <!-- ............................................................................... -->
            <!-- Utilities Plugin -->

            <Plugin>
                <!-- A virtual Plugin -->
                <Identifier>Utilities</Identifier>
                <Name>Utilities</Name>
                <Description>The Clock Utilities</Description>
                <ResourceKey>Utilities</ResourceKey>

                <!-- The Utilities Plugin is always CommandCodeBase 01 -->
                <CommandCodeBase>01</CommandCodeBase>

                <Command>
                    <Identifier>getDate</Identifier>
                    <CommandCode>00</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Get the Date</Description>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Date</Name>
                        <DataTypeName>Date</DataTypeName>
                        <Units>YearMonthDay</Units>
                        <Regex>^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>getTime</Identifier>
                    <CommandCode>01</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Get the Time</Description>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Time</Name>
                        <DataTypeName>Time</DataTypeName>
                        <Units>HourMinSec</Units>
                        <Regex>^(([0-1][0-9])|([2][0-3])):([0-5][0-9]):([0-5][0-9])$</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>getTimeZone</Identifier>
                    <CommandCode>02</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Get the TimeZone</Description>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>TimeZone</Name>
                        <DataTypeName>TimeZone</DataTypeName>
                        <Units>Dimensionless</Units>
                        <!-- ToDo TimeZone Regex -->
                    </Response>
                </Command>

                <Command>
                    <Identifier>synchroniseNow</Identifier>
                    <CommandCode>03</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Synchronises the Clock once, using NTP, if possible</Description>
                    <SendToPort>false</SendToPort>
                    <Response>
                        <Name>Timestamp</Name>
                        <DataTypeName>String</DataTypeName>
                        <Units>Dimensionless</Units>
                        <!-- ISO format yyyy-MM-dd HH:mm:ss.SSS -->
                        <Regex>^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01]) (([0-1][0-9]|[2][0-3])):([0-5][0-9]):([0-5][0-9]).[0-9][0-9][0-9]$</Regex>
                    </Response>
                </Command>

                <Command>
                    <Identifier>copyResponseToClipboard</Identifier>
                    <CommandCode>04</CommandCode>
                    <CommandVariant>0000</CommandVariant>
                    <Description>Copies the most recent ResponseValue to the host Clipboard</Description>
                    <SendToPort>false</SendToPort>
                    <Ack>
                        <Name>Ack</Name>
                    </Ack>
                </Command>
            </Plugin>

        </Controller>

        <Name>Observatory Clock</Name>
        <Description>The Observatory Clock</Description>
        <InstrumentClassname>org.lmn.fc.frameworks.starbase.plugins.observatory.ui.instruments.impl.clock.ObservatoryClock</InstrumentClassname>
        <Controllable>true</Controllable>
        <SelectorPanelHeight>1</SelectorPanelHeight>

        <ResourceKey>ObservatoryClock</ResourceKey>

        <!-- Instrument Metadata optionally goes here -->

        <!-- IndicatorMetadataKeys -->
        <!-- These do not map to real metadata, they are just keys that -->
        <!-- control which kind of clocks appear on the ControlPanel -->
        <!-- TimeSystem allowed values: JD  LMT  UT  GMST  GAST  LMST  LAST  -->
        <!-- JD0  GMST0  GAST0 will display, but are not very useful! -->

        <!-- If both keys are omitted then the display defaults to a single UT clock -->
        <IndicatorMetadataKey>Clock.Display.TimeSystem.UT</IndicatorMetadataKey>

        <!-- This may be omitted if only a single clock is required -->
        <IndicatorMetadataKey>Clock.Display.TimeSystem.LAST</IndicatorMetadataKey>

        <!-- The Data Access Object is the Java interface to the Controller -->
        <DAO>
            <Name>Observatory Clock</Name>
            <Description>The ObservatoryClock DAO</Description>

            <!-- SimplePlatformClockDAO just uses the PC platform clock -->
            <DaoClassname>org.lmn.fc.frameworks.starbase.plugins.observatory.ui.instruments.impl.clock.dao.SimplePlatformClockDAO</DaoClassname>

            <!-- NTPSynchronisedProxyClockDAO runs independently of the PC platform clock, synchronised by NTP -->
            <!-- This DAO is under development, and may need some work before it is truly stable! -->
            <!--<DaoClassname>org.lmn.fc.frameworks.starbase.plugins.observatory.ui.instruments.impl.clock.dao.NTPSynchronisedProxyClockDAO</DaoClassname>-->

            <!-- The DAO has no Port -->

            <!-- The DAO has no Inputs -->

            <!-- DAO Outputs -->
            <Output>
                <Name>CommandLog</Name>
                <Description>The Command Log produced by the DAO</Description>
                <Tooltip>The Command Log</Tooltip>
                <DataTypeName>ListData</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
            <Output>
                <Name>Ephemeris</Name>
                <Description>The Ephemeris produced by the DAO</Description>
                <Tooltip>The Ephemeris</Tooltip>
                <DataTypeName>VectorData</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
            <Output>
                <Name>EventLog</Name>
                <Description>The Event Log produced by the DAO</Description>
                <Tooltip>The Event Log</Tooltip>
                <DataTypeName>VectorData</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
            <Output>
                <Name>MetaData</Name>
                <Description>The Meta Data produced by the DAO</Description>
                <Tooltip>The Meta Data</Tooltip>
                <DataTypeName>ListData</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
            <Output>
                <Name>Configuration</Name>
                <Description>The Configuration produced by the DAO</Description>
                <Tooltip>The Configuration</Tooltip>
                <DataTypeName>ListData</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
            <Output>
                <Name>CommandLexicon</Name>
                <Description>The Instrument Command Lexicon produced by the DAO</Description>
                <Tooltip>The Instrument Command Lexicon</Tooltip>
                <DataTypeName>ListData</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
            <Output>
                <Name>XML</Name>
                <Description>The Instrument XML Configuration produced by the DAO</Description>
                <Tooltip>The Instrument XML Configuration</Tooltip>
                <DataTypeName>XML</DataTypeName>
                <Units>Dimensionless</Units>
            </Output>
        </DAO>
    </Instrument>

</Instruments>
